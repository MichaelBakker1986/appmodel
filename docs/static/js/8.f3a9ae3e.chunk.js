(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[8],{678:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return X}));var c=a(35),r=a(23),n=a(10),l=a(1),i=a.n(l),s=a(14),o=a(105),d=a(31),u=a(91),m=a(45),b=a(27),E=a(40),j=a(104),O=a(349),g=a(350),p=a(48),v=a(18),N=a(343),f=a(639),I=a(670);function h(e){e.payPal;var t=e.successPaymentHandler,a=e.basket;return i.a.createElement(I.a,{createOrder:function(e,t){return t.order.create({purchase_units:[{amount:{value:Number(a.calcTotalPrice).toFixed(2)}}]})},amount:Number(a.calcTotalPrice).toFixed(2),onApprove:t})}var P=a(351),w=a(97),y=a(15),S=a(37),T=["calcTotalPrice","calcTaxPrice","calcShippingPrice","calcItemsPrice","items"],W={NEW:"NEW",new:"NEW",EXISTING:"EXISTING"};function G(){var e=Object(I.c)();return Object(n.a)(e,1)[0].isPending?i.a.createElement(f.a,{sx:{height:200},animation:"wave",variant:"rectangular"}):null}function X(){var e=Object(s.b)(),t=Object(p.h)().id,a=Object(p.f)(),f=Object(l.useState)(1),X=Object(n.a)(f,2),k=X[0],x=X[1],F=Object(l.useState)(W[t||W.NEW]||W.EXISTING),A=Object(n.a)(F,2),_=A[0],q=A[1],D=Object(s.c)((function(e){return e.orderDetails})),z=Object(n.a)(D,2),C=z[0],H=z[1],J=Object(s.c)((function(e){return e.paypal})),B=Object(n.a)(J,3),L=B[0],R=B[1],U=B[2],V=Object(s.c)(y.q.selector).userInfo,K=Object(s.c)(S.a.selector),M=Object(l.useState)(new w.c(Object(r.a)({},Object.assign(_===W.NEW?K:C.succes?H:{})))),Q=Object(n.a)(M,2),Y=Q[0],Z=Q[1],$=Object(s.c)(d.q.selector),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],ce=Object(s.c)(d.j.selector),re=Object(n.a)(ce,2),ne=re[0],le=re[1],ie=Object(s.c)(d.r.selector),se=Object(n.a)(ie,2),oe=se[0];se[1];Object(l.useEffect)((function(){k?(x(0),e(d.q.resetAction),e(d.j.resetAction),e({type:d.l}),e({type:d.c}),V&&e(Object(o.e)()),_===W.NEW||t===W.NEW?(q(W.NEW),Z(new w.c(Object(r.a)({},K)))):_===W.EXISTING&&t&&"new"!==t&&(e(Object(o.d)(t)),q(W.EXISTING),Z(new w.c({})))):ne.success?(e(Object(o.d)(le.order._id)),e(d.j.resetAction),q(W.EXISTING)):te.success?(Z(new w.c(Object(r.a)({},ae.order))),q(W.EXISTING)):C.success?(Z(new w.c(Object(r.a)({},H))),q(W.EXISTING)):_!==W.EXISTING&&t&&"new"!==t&&(Z(new w.c({})),e(Object(o.d)(t)),q(W.EXISTING))}),[q,k,C.initializing,C.loading,V,e,C.success,C.error,t,te.success,ne.success,H,K,_]);return i.a.createElement(E.a,{loading:te.loading||ne.loading||R||C.loading},i.a.createElement("div",{className:"container g-0"},i.a.createElement("div",{className:"row py-3"},_===W.NEW?i.a.createElement(j.a,{step:3}):i.a.createElement(j.a,{loading:C.loading,steps:j.b,step:C.success&&H.isPaid?H.isSend?2:1:0})),C.showError?i.a.createElement(b.b,{loading:C.loading,error:H,severity:"error"},H):i.a.createElement("div",{className:"row p-4"},i.a.createElement("div",{className:"col-md-8 col-lg-8 pb-4"},Y._id?i.a.createElement(v.b,{className:"btn-link",to:"/order/"+Y._id},i.a.createElement("h4",null,"Bestelling")):_===W.NEW&&i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,null),i.a.createElement("br",null)),i.a.createElement("div",null,i.a.createElement(P.a,{handleClick:function(e){return function(t){t.preventDefault(),a.push({pathname:"/product/"+e,hash:"#top"})}},order:Y.items})),i.a.createElement("br",null),i.a.createElement(g.a,{cart:Y,loading:te.loading,elevation:1,delivery:!0}),i.a.createElement("br",null),i.a.createElement(g.b,{cart:Y,loading:ne.loading,elevation:1,delivery:!0}),oe.success&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement(g.c,{cart:Y,loading:oe.loading,elevation:1,delivery:!0}))),i.a.createElement("div",{className:"col-md-4 col-lg-4 order-screen"},i.a.createElement("div",{className:"data-info p-3"},i.a.createElement(O.a,{order:Y})),(_===W.NEW||!(null===Y||void 0===Y?void 0:Y.isPaid))&&(te.showError||R||L?i.a.createElement(b.b,{loading:te.loading||R,error:te.error||L,severity:"error"},ae,L):i.a.createElement(i.a.Fragment,null,i.a.createElement(I.b,{options:{components:"buttons,marks,messages","enable-funding":"sofort,card,credit,ideal",currency:"EUR",locale:"nl_NL",intent:"capture","client-id":U}},i.a.createElement(G,null),i.a.createElement(h,{basket:Y,successPaymentHandler:function(t,n){return n.order.capture().then((function(t){var n=Y.calcTotalPrice,l=Y.calcTaxPrice,i=Y.calcShippingPrice,s=Y.calcItemsPrice,d=Y.items,u=Object(c.a)(Y,T);e(Object(o.a)(a,Object(r.a)(Object(r.a)({},u),{},{itemsPrice:s,shippingPrice:i,taxPrice:l,totalPrice:n,orderItems:d}),t))}))},payPal:U})))),(null===V||void 0===V?void 0:V.isAdmin)&&C.success&&H.isPaid&&!H.isDelivered&&i.a.createElement(i.a.Fragment,null,ne.showError?i.a.createElement(b.b,{loading:ne.loading,error:le,severity:"error"},le):i.a.createElement(u.a,{style:{width:"100%"},className:"btn btn-primary btn-shadow d-block",variant:"contained",type:"button",onClick:function(){e(Object(o.c)(H))}},i.a.createElement(m.c,{className:"fs-lg me-2","aria-hidden":"true"}),"Verzend order"))))))}}}]);